(function(){"use strict";var e={7616:function(e,t,a){var r=a(144),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-navigation-drawer",{attrs:{app:"",color:"#DDDDDD",permanent:"","mini-variant-width":55,width:"18.96%"}},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[a("v-icon",{attrs:{left:""}},[e._v(e._s(e.icon.mdiMenu))]),e._v(" База объектов ")],1)],1)],1),a("v-divider"),a("v-list",{attrs:{dense:"",nav:""}},[a("v-list-item",{attrs:{link:""}},[a("v-list-item-content",[a("v-list-item-title")],1)],1)],1)],1),a("v-main",[a("v-toolbar",{staticStyle:{"border-bottom":"1px solid #E0E0E0"},attrs:{color:"#E5E5E5"},scopedSlots:e._u([{key:"extension",fn:function(){return[a("v-tabs",{attrs:{"align-with-title":"",color:"#E93030"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.items,(function(t){return a("v-tab",{key:t},[a("span",[e._v(e._s(t))])])})),1),a("v-btn",{staticClass:"show__card",attrs:{height:"28px",width:"80px",depressed:"",color:"#EE5E5E"},on:{click:function(t){e.visableCard(),e.addCardOn.data=!e.addCardOn.data,e.emptyFeature()}}},[a("v-icon",{attrs:{color:"white !default",dark:""}},[e._v(" "+e._s(e.icon.mdiPlus)+" ")])],1)]},proxy:!0}])},[a("v-toolbar-title",[e._v("Your Dashboard")])],1),a("v-tabs-items",{staticStyle:{height:"89.7%"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("CardInfo",{attrs:{cardVisable:e.cardVisable,addCardOn:e.addCardOn,infoCardOn:e.infoCardOn,editCardOn:e.editCardOn,icon:e.icon,getFeature:e.getFeature,visableCard:e.visableCard,notVisableCard:e.notVisableCard,addNewFeature:e.addNewFeature,editFeature:e.editFeature}}),a("v-tab-item",[a("div",{attrs:{flat:""}},[a("HomePage")],1)]),a("v-tab-item",[a("div",{attrs:{flat:""}},[a("MapArea",{attrs:{allFeatures:e.allFeatures,cord:e.cord,visableCard:e.visableCard,notVisableCard:e.notVisableCard,addCardOn:e.addCardOn,infoCardOn:e.infoCardOn,editCardOn:e.editCardOn,getFeature:e.getFeature}})],1)])],1)],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"object"}},[a("p",[e._v(e._s(e.items.length)+" объекта ")]),a("v-data-table",{staticClass:"ma-0 pa-0 elevation-1",staticStyle:{height:"91.28%",width:"50% !important","background-color":"#E5E5E5","box-shadow":"none !important"},attrs:{headers:e.headers,"show-select":"",items:e.items,"items-per-page":14}})],1)},o=[],d=a(629),l={name:"HomePage",data(){return{features:{features:this.allFeatures},feature:this.getFeature,items:[],headers:[{text:"MAMA",align:"start",sortable:!1,value:"number_support"},{text:"VL",value:"VL"},{text:"type_support",value:"type_support"},{text:"material",value:"material"}]}},watch:{getFeature:function(){this.feature=this.getFeature},allFeatures:function(){this.features=this.allFeatures}},computed:(0,d.Se)(["allFeatures","getFeature"]),methods:{...(0,d.nv)(["getFeatures","postFeature"]),...(0,d.OI)(["emptyFeature","updateFeature"]),addItem(){console.log(1),this.features.forEach((e=>{this.items.push(e.properties)})),console.log(this.items)}},async mounted(){await this.getFeatures(),await this.emptyFeature(),this.addItem()}},u=l,c=a(1001),p=a(3453),f=a.n(p),h=a(5891),m=(0,c.Z)(u,n,o,!1,null,null,null),v=m.exports;f()(m,{VDataTable:h.Z});var g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{position:"absolute",top:"0",bottom:"0",right:"0",left:"0"},attrs:{id:"map_content"}})},b=[],y=a(9073),C=a(2241),w=a(1162),_=a(4626),F=a(1311),O=a(8109),x=a(1361),Z=a(9857),V=a(4337),E=a(8373),P=a(7539),S=a(1345),I=a(8958),k=a(7890),L=(a(8646),{components:{},props:["allFeatures","cord","visableCard","addCardOn","infoCardOn","notVisableCard","editCardOn","getFeature"],data(){return{coord:this.cord,features:{type:"FeatureCollection",features:this.allFeatures},feature:this.getFeature,showAdd:!1,showEdit:!1,drawType:{data:"Point"},vectorLayer:null,map:null,drawLayer:null,interactionId:null,overlayId:null,draw:null,modify:null,addCardOn_:this.addCardOn,infoCardOn_:this.infoCardOn,editCardOn_:this.editCardOn}},watch:{allFeatures:function(){this.features={type:"FeatureCollection",features:this.allFeatures},null!=this.map&&(this.map.removeLayer(this.vectorLayer),this.vectorLayer=new O.Z({source:new x.Z({features:(new Z.Z).readFeatures(this.features,{featureProjection:"EPSG:3857"})})}),this.map.addLayer(this.vectorLayer))},getFeature:function(){this.feature=this.getFeature},addCardOn:{handler(){this.addCardOn_=this.addCardOn,this.addCardOn.data?(this.map.removeInteraction(this.draw),this.addInteraction()):(this.map.removeInteraction(this.draw),this.drawLayer.getSource().refresh(),this.map.removeInteraction(this.modify))},deep:!0}},methods:{...(0,d.OI)(["updateFeature"]),getFeature_(e){1===this.drawLayer.getSource().getFeatures().length&&(this.coord.data=this.drawLayer.getSource().getFeatures()[0].getGeometry().getCoordinates(),this.map.removeInteraction(this.draw)),this.coord.data=e.coordinate;const t=this.map.getFeaturesAtPixel(e.pixel)[0];null!=t?(this.feature.geometry={id:t.getProperties().id,type:t.getProperties().geometry.getType(),coordinates:(0,F.bU)(t.getProperties().geometry.getCoordinates())},this.feature.properties.shirota=this.feature.geometry.coordinates[1],this.feature.properties.dolgota=this.feature.geometry.coordinates[0],this.addCardOn_.data||(this.feature.properties=t.getProperties(),this.feature.id=this.feature.properties.id,delete this.feature.properties.geometry,this.infoCardOn_.data=!0,this.visableCard()),this.updateFeature(this.feature)):this.addCardOn_.data||(this.infoCardOn_.data=!1,this.editCardOn_.data=!1,this.notVisableCard())},changeCoordinates(e){this.feature.geometry={coordinates:(0,F.bU)(e.features.getArray()[0].getGeometry().getCoordinates())},this.feature.properties.shirota=this.feature.geometry.coordinates[1],this.feature.properties.dolgota=this.feature.geometry.coordinates[0]},addInteraction(){this.drawLayer.getSource().refresh(),this.draw=new V.ZP({source:this.drawLayer.getSource(),type:this.drawType.data}),this.map.addInteraction(this.draw),this.map.addInteraction(this.modify),this.interactionId=this.map.getInteractions().getArray().length-1}},async mounted(){this.drawLayer=new O.Z({source:new x.Z({features:[]}),style:new P.ZP({fill:new S.Z({color:"rgba(255, 255, 0, 0.2)"}),stroke:new I.Z({color:"#ff0000",width:2}),image:new k.Z({radius:7,fill:new S.Z({color:"#ff0000"})})})}),this.vectorLayer=new O.Z({source:new x.Z({features:(new Z.Z).readFeatures(this.features,{featureProjection:"EPSG:3857"})})}),this.map=new y.Z({target:"map_content",layers:[new w.Z({source:new _.Z}),this.vectorLayer,this.drawLayer],view:new C.ZP({zoom:13,center:(0,F.mi)([54,56]),constrainResolution:!0})}),this.modify=new E.Z({source:this.drawLayer.getSource()}),this.modify.on("modifyend",this.changeCoordinates),this.map.on("click",this.getFeature_),this.addCardOn_.data&&this.addInteraction(),setTimeout((()=>{this.map.updateSize()}),400)}}),T=L,j=(0,c.Z)(T,g,b,!1,null,null,null),A=j.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.cardVisable_.data?a("v-card",{attrs:{width:"38.05%"}},[e.addCardOn_.data?a("div",{staticClass:"card__window"},[a("p",{staticStyle:{display:"none"}},[e._v(e._s(e.feature))]),a("v-file-input",{staticClass:"pa-0 ma-0",attrs:{height:"37.53%",color:"#EE5E5E","prepend-icon":e.icon.mdiImagePlusOutline,"hide-input":""}}),a("div",{staticStyle:{"overflow-y":"scroll","overflow-x":"hidden"}},[a("v-card-text",{staticClass:"pa-0"},[a("v-form",[a("v-row",{attrs:{justify:"start"}},[a("v-col",{attrs:{cols:"2",sm:"6",md:"5",lg:"6"}},[a("v-card-text",{staticStyle:{"font-size":"24px",padding:"16px 0"}},[e._v("Создание объекта")])],1),e._l(e.feature.properties,(function(t,r){return a("v-col",{key:t.number_support,attrs:{cols:"2",sm:"6",md:"5",lg:"6"}},[a("v-text-field",{attrs:{value:e.feature.properties[r],"hide-details":"",label:r,placeholder:r,filled:""},model:{value:e.feature.properties[r],callback:function(t){e.$set(e.feature.properties,r,t)},expression:"feature.properties[index]"}})],1)}))],2)],1)],1)],1),a("div",{staticClass:"card__footer"},[a("v-btn",{attrs:{color:"white",depressed:""},on:{click:function(t){e.notVisableCard(),e.addCardOn_.data=!e.addCardOn_.data}}},[e._v("ОТМЕНА")]),a("v-btn",{attrs:{color:"white",depressed:""},on:{click:function(t){return e.addNewFeature()}}},[e._v("Создать")])],1)],1):e.infoCardOn_.data?a("div",{staticClass:"card__window"},[a("v-file-input",{staticClass:"pa-0 ma-0",attrs:{disabled:"",height:"37.53%",color:"#EE5E5E","prepend-icon":e.icon.mdiImagePlusOutline,"hide-input":""}}),a("div",{staticStyle:{"overflow-y":"scroll","overflow-x":"hidden"}},[a("v-card-text",{staticClass:"pa-0"},[a("v-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[a("v-row",{attrs:{justify:"start"}},[a("v-col",{attrs:{cols:"2",sm:"6",md:"5",lg:"6"}},[a("v-card-text",{staticClass:"pa-0",staticStyle:{"font-size":"24px"}},[e._v(e._s(e.feature.properties.name_tap)+" ")])],1),a("v-col",{staticClass:"pa-0",attrs:{cols:"2",sm:"6",md:"5",lg:"6"}},[a("v-card-text",{staticClass:"pa-0",staticStyle:{"font-size":"24px",display:"flex","justify-content":"flex-end"}},[a("v-btn",{staticClass:"ma-0",attrs:{fab:"",small:"",elevation:"0",color:"white"},on:{click:function(t){e.editCardOn_.data=!e.editCardOn_.data,e.infoCardOn_.data=!e.infoCardOn_.data}}},[a("v-icon",[e._v(" "+e._s(e.icon.mdiPencil)+" ")])],1),a("v-btn",{staticClass:"ma-0",attrs:{fab:"",small:"",elevation:"0",color:"white"},on:{click:function(t){e.deleteFeature(e.feature.id),e.infoCardOn_.data=!e.infoCardOn_.data,e.notVisableCard()}}},[a("v-icon",[e._v(" "+e._s(e.icon.mdiDeleteOutline)+" ")])],1)],1)],1),e._l(e.feature.properties,(function(t,r){return a("v-col",{directives:[{name:"show",rawName:"v-show",value:"name_tap"!=r&&"id"!=r,expression:"index != 'name_tap' && index != 'id'"}],key:t.number_support,attrs:{cols:"2",sm:"6",md:"5",lg:"6"}},[a("v-text-field",{attrs:{readonly:"",value:e.feature.properties[r],"hide-details":"",label:r,placeholder:r,filled:""},model:{value:e.feature.properties[r],callback:function(t){e.$set(e.feature.properties,r,t)},expression:"feature.properties[index]"}})],1)}))],2)],1)],1)],1)],1):e.editCardOn.data?a("div",{staticClass:"card__window"},[a("v-file-input",{staticClass:"pa-0 ma-0",attrs:{height:"37.53%",color:"#EE5E5E","prepend-icon":e.icon.mdiImagePlusOutline,"hide-input":""}}),a("div",{staticStyle:{"overflow-y":"scroll","overflow-x":"hidden"}},[a("v-card-text",{staticClass:"pa-0"},[a("v-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[a("v-row",{attrs:{justify:"start"}},[a("v-col",{attrs:{cols:"2",sm:"6",md:"5",lg:"6"}},[a("v-card-text",{staticStyle:{"font-size":"24px",padding:"16px 0"}},[e._v("Редактирование")])],1),e._l(e.feature.properties,(function(t,r){return a("v-col",{directives:[{name:"show",rawName:"v-show",value:"id"!=r,expression:"index != 'id'"}],key:t.number_support,attrs:{cols:"2",sm:"6",md:"5",lg:"6"}},[a("v-text-field",{attrs:{value:e.feature.properties[r],"hide-details":"",label:r,placeholder:r,filled:""},model:{value:e.feature.properties[r],callback:function(t){e.$set(e.feature.properties,r,t)},expression:"feature.properties[index]"}})],1)}))],2)],1)],1)],1),a("div",{staticClass:"card__footer"},[a("v-btn",{attrs:{color:"white",depressed:""},on:{click:function(t){e.notVisableCard(),e.addCardOn_.data=!e.addCardOn_.data}}},[e._v("ОТМЕНА")]),a("v-btn",{attrs:{color:"white",depressed:""},on:{click:function(t){return e.editFeature()}}},[e._v("Редактирование")])],1)],1):e._e()]):e._e()},N=[],D={name:"CardInfo",props:["cardVisable","addCardOn","infoCardOn","editCardOn","icon","getFeature","visableCard","notVisableCard","addNewFeature","editFeature"],data(){return{cardVisable_:this.cardVisable,addCardOn_:this.addCardOn,infoCardOn_:this.infoCardOn,editCardOn_:this.editCardOn,feature:this.getFeature}},watch:{cardVisable:function(){this.cardVisable_=this.cardVisable},getFeature:function(){this.feature=this.getFeature}},methods:(0,d.nv)(["deleteFeature"])},$=D,z=a(680),H=a(3237),R=a(7118),B=a(2102),G=a(7781),q=a(6232),U=a(6428),J=a(2877),W=a(5978),Y=(0,c.Z)($,M,N,!1,null,null,null),K=Y.exports;f()(Y,{VBtn:z.Z,VCard:H.Z,VCardText:R.ZB,VCol:B.Z,VFileInput:G.Z,VForm:q.Z,VIcon:U.Z,VRow:J.Z,VTextField:W.Z});var Q=a(5317),X={components:{HomePage:v,MapArea:A,CardInfo:K},data(){return{tab:null,items:["СПИСОК","КАРТА"],cardVisable:{data:!1},addCardOn:{data:!1},infoCardOn:{data:!1},editCardOn:{data:!1},icon:Q,test:null,feature:this.getFeature,cord:{data:[NaN,NaN]}}},watch:{getFeature:function(){this.feature=this.getFeature}},computed:(0,d.Se)(["allFeatures","getFeature"]),methods:{...(0,d.nv)(["getFeatures","postFeature","putFeature"]),...(0,d.OI)(["emptyFeature","updateFeature"]),visableCard(){this.cardVisable.data=!0;let e=document.querySelector(".v-btn");e.setAttribute("disabled",!0),e.classList.add("v-btn--disabled")},notVisableCard(){this.cardVisable.data=!1;let e=document.querySelector(".v-btn");e.removeAttribute("disabled",!1),e.classList.remove("v-btn--disabled")},async addNewFeature(){await this.postFeature(JSON.stringify([this.getFeature])),this.addCardOn.data=!this.addCardOn.data,this.notVisableCard()},async editFeature(){await this.putFeature(JSON.stringify(this.getFeature)),this.editCardOn.data=!this.editCardOn.data,this.infoCardOn.data=!this.infoCardOn.data}},async mounted(){await this.getFeatures(),console.log(this.getFeature),this.emptyFeature()}},ee=X,te=a(7524),ae=a(1418),re=a(6816),ie=a(7620),se=a(1421),ne=a(7877),oe=a(3283),de=a(4227),le=a(1759),ue=a(7090),ce=a(1954),pe=a(6656),fe=a(7921),he=(0,c.Z)(ee,i,s,!1,null,null,null),me=he.exports;f()(he,{VApp:te.Z,VBtn:z.Z,VDivider:ae.Z,VIcon:U.Z,VList:re.Z,VListItem:ie.Z,VListItemContent:se.km,VListItemTitle:se.V9,VMain:ne.Z,VNavigationDrawer:oe.Z,VTab:de.Z,VTabItem:le.Z,VTabs:ue.Z,VTabsItems:ce.Z,VToolbar:pe.Z,VToolbarTitle:fe.qW});var ve=a(9132);r.Z.use(ve.Z);const ge=new ve.Z({theme:{options:{customProperties:!0},themes:{light:{primary:"#000000",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107",background:"#E5E5E5"}}},icons:{iconfont:"mdi"}});var be=ge,ye=a(8345),Ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("HomePage")},we=[],_e={name:"HomeView",components:{HomePage:v}},Fe=_e,Oe=(0,c.Z)(Fe,Ce,we,!1,null,null,null),xe=Oe.exports,Ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("MapArea")},Ve=[],Ee={name:"MapView",components:{MapArea:A}},Pe=Ee,Se=(0,c.Z)(Pe,Ze,Ve,!1,null,null,null),Ie=Se.exports;r.Z.use(ye.Z);const ke=[{path:"/",name:"home",component:xe},{path:"/map",name:"map",component:Ie}],Le=new ye.Z({mode:"history",base:"/",routes:ke});var Te=Le,je=a(9669),Ae=a.n(je),Me=a(2346),Ne={actions:{async getFeatures(e){await Ae().get("/tower").then((t=>{const a=t.data;e.commit("updateFeatures",a)}))},async postFeature(e,t){const a=await Ae().post("/tower",t).catch((e=>console.log(e)));console.log(a.data),e.dispatch("getFeatures")},async putFeature(e,t){await Ae().put("/tower",t).then((t=>{const a=t.data;console.log(a),e.dispatch("getFeatures")}))},async deleteFeature(e,t){await Ae()["delete"](`/tower/${t}`).then((e=>{const t=e.data;console.log(t)})),e.dispatch("getFeatures")}},mutations:{updateFeatures(e,t){e.features=t},updateResultPost(e,t){e.resultPost=t},updateResultPut(e,t){e.resultPut=t},emptyFeature(e){for(let t in e.features[0])if("properties"===t)for(let a in e.features[0][t])"id"!=a&&("string"===typeof e.features[0][t][a]?e.feature[t][a]="":"number"===typeof e.features[0][t][a]?e.feature[t][a]=1:"boolean"===typeof e.features[0][t][a]&&(e.feature[t][a]=!1));delete e.feature.id,delete e.feature.properties.id,delete e.feature.geometry.id},updateFeature(e,t){e.feature=t}},getters:{allFeatures(e){return e.features},getResultPost(e){return e.resultPost},getResultPut(e){return e.resultPut},getFeature(e){return e.feature}},state:{features:[],resultPost:null,resultPut:null,feature:{type:"Feature",properties:{},geometry:{}}}};r.Z.use(d.ZP);var De=new d.ZP.Store({modules:{features:Ne}});r.Z.use(Me.Z,Ae()),r.Z.use(be),new r.Z({router:Te,vuetify:be,store:De,render:e=>e(me)}).$mount("#app")}},t={};function a(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(s.exports,s,s.exports,a),s.loaded=!0,s.exports}a.m=e,function(){a.amdO={}}(),function(){var e=[];a.O=function(t,r,i,s){if(!r){var n=1/0;for(u=0;u<e.length;u++){r=e[u][0],i=e[u][1],s=e[u][2];for(var o=!0,d=0;d<r.length;d++)(!1&s||n>=s)&&Object.keys(a.O).every((function(e){return a.O[e](r[d])}))?r.splice(d--,1):(o=!1,s<n&&(n=s));if(o){e.splice(u--,1);var l=i();void 0!==l&&(t=l)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[r,i,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var i,s,n=r[0],o=r[1],d=r[2],l=0;if(n.some((function(t){return 0!==e[t]}))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(d)var u=d(a)}for(t&&t(r);l<n.length;l++)s=n[l],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(u)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(7616)}));r=a.O(r)})();
//# sourceMappingURL=app.fd6509e7.js.map